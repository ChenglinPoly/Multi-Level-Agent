# MLA-V3 Web UI

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ Web å‰ç«¯ç•Œé¢ï¼Œç”¨äºä¸ MLA-V3 æ¡†æ¶è¿›è¡Œäº¤äº’ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¨ ç°ä»£åŒ–çš„å¯¹è¯ç•Œé¢
- ğŸ¤– æ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„ Agentï¼ˆå¸¦å¤´åƒï¼‰
- ğŸ“‚ æ˜¾ç¤º Task ID å’Œ Workspace è·¯å¾„
- ğŸ“Š å®æ—¶æµå¼è¾“å‡ºï¼ˆç±»ä¼¼ç»ˆç«¯ï¼‰
- ğŸ”„ æ”¯æŒå¤šä¸ª Agent ç³»ç»Ÿåˆ‡æ¢
- ğŸ’¬ æ”¯æŒå¤šè¡Œè¾“å…¥å’Œ Enter å‘é€

## å®‰è£…ä¾èµ–

```bash
pip install flask flask-cors
```

æˆ–è€…æ·»åŠ åˆ° `requirements.txt`ï¼š

```
flask
flask-cors
```

## å¯åŠ¨æ–¹å¼

### æ–¹æ³• 1ï¼šä½¿ç”¨ä¾¿æ·è„šæœ¬ï¼ˆæ¨èï¼‰

**æ³¨æ„**ï¼šå¯åŠ¨è„šæœ¬ä¼šè‡ªåŠ¨å¯åŠ¨å·¥å…·æœåŠ¡å™¨ï¼ˆtool_server_liteï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨å¯åŠ¨ã€‚

1. å¯åŠ¨æœåŠ¡å™¨ï¼ˆä¼šè‡ªåŠ¨å¯åŠ¨ Web UI å’Œå·¥å…·æœåŠ¡å™¨ï¼‰ï¼š
   ```bash
   cd web_ui/server
   ./start.sh
   ```
   æˆ–è€…ä½¿ç”¨ç»Ÿä¸€ç®¡ç†è„šæœ¬ï¼š
   ```bash
   cd web_ui/server
   ./server start
   ```

2. åœæ­¢æœåŠ¡å™¨ï¼ˆä¼šåŒæ—¶åœæ­¢ Web UI å’Œå·¥å…·æœåŠ¡å™¨ï¼‰ï¼š
   ```bash
   cd web_ui/server
   ./stop.sh
   ```
   æˆ–è€…ï¼š
   ```bash
   cd web_ui/server
   ./server stop
   ```

3. æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€ï¼š
   ```bash
   cd web_ui/server
   ./server status
   ```
   ä¼šæ˜¾ç¤º Web UI å’Œå·¥å…·æœåŠ¡å™¨çš„è¿è¡ŒçŠ¶æ€ã€‚

4. é‡å¯æœåŠ¡å™¨ï¼š
   ```bash
   cd web_ui/server
   ./server restart
   ```

5. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
   ```
   http://localhost:22228
   ```
   
   **æœåŠ¡å™¨åœ°å€**ï¼š
   - Web UI: http://localhost:22228
   - å·¥å…·æœåŠ¡å™¨ API: http://localhost:24243
   - å·¥å…·æœåŠ¡å™¨æ–‡æ¡£: http://localhost:24243/docs

### æ–¹æ³• 2ï¼šç›´æ¥è¿è¡Œ Pythonï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰

**æ³¨æ„**ï¼šå¦‚æœä½¿ç”¨æ­¤æ–¹æ³•ï¼Œéœ€è¦æ‰‹åŠ¨å¯åŠ¨å·¥å…·æœåŠ¡å™¨ã€‚

1. å¯åŠ¨å·¥å…·æœåŠ¡å™¨ï¼ˆåœ¨ä¸€ä¸ªç»ˆç«¯ï¼‰ï¼š
   ```bash
   cd tool_server_lite
   python server.py
   ```

2. å¯åŠ¨ Web UI æœåŠ¡å™¨ï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰ï¼š
   ```bash
   cd web_ui/server
   python server.py
   ```

3. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
   ```
   http://localhost:22228
   ```

### ç«¯å£é…ç½®

- **Web UI é»˜è®¤ç«¯å£**: 22228ï¼ˆå› ä¸º macOS çš„ AirPlay å¯èƒ½å ç”¨ 5000 ç«¯å£ï¼‰
- **å·¥å…·æœåŠ¡å™¨é»˜è®¤ç«¯å£**: 24243
- å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æŒ‡å®šå…¶ä»–ç«¯å£ï¼š
  ```bash
  cd web_ui/server
  PORT=8080 TOOL_PORT=8002 ./start.sh
  # æˆ–
  PORT=8080 TOOL_PORT=8002 ./server start
  ```

## ä½¿ç”¨è¯´æ˜

### 1. è®¾ç½® Task ID

åœ¨é¡¶éƒ¨çš„ "Task ID" è¾“å…¥æ¡†ä¸­è¾“å…¥ä»»åŠ¡ç›®å½•çš„ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ï¼š
```
/mla_task
```
æˆ–
```
/Users/username/Desktop/my_project
```

### 2. é€‰æ‹© Agent

- ä» "Agent" ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©è¦ä½¿ç”¨çš„ Agent
- ä» "System" ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹© Agent ç³»ç»Ÿï¼ˆTest_agent æˆ– infiHelperï¼‰
- ç‚¹å‡» "åˆ·æ–° Agents" æŒ‰é’®å¯ä»¥é‡æ–°åŠ è½½å¯ç”¨ Agent åˆ—è¡¨

### 3. è¾“å…¥ä»»åŠ¡

åœ¨åº•éƒ¨çš„è¾“å…¥æ¡†ä¸­è¾“å…¥ä»»åŠ¡æè¿°ï¼Œä¾‹å¦‚ï¼š
```
å¸®æˆ‘æ‰¾ä¸€ç¯‡å…³äº ECM çš„è®ºæ–‡
```

ç„¶åç‚¹å‡» "å‘é€" æŒ‰é’®æˆ–æŒ‰ Enter é”®ï¼ˆShift+Enter æ¢è¡Œï¼‰ã€‚

### 4. æŸ¥çœ‹è¾“å‡º

Agent çš„æ‰§è¡Œè¾“å‡ºä¼šå®æ—¶æ˜¾ç¤ºåœ¨å¯¹è¯çª—å£ä¸­ï¼š
- æ¯æ¡æ¶ˆæ¯æ˜¾ç¤º Agent å¤´åƒå’Œåç§°
- ä¸åŒç±»å‹çš„æ¶ˆæ¯æœ‰ä¸åŒçš„é¢œè‰²ï¼š
  - ğŸ”§ å·¥å…·è°ƒç”¨ï¼šé’è‰²
  - âœ… æˆåŠŸæ¶ˆæ¯ï¼šé’è‰²
  - âŒ é”™è¯¯æ¶ˆæ¯ï¼šçº¢è‰²
  - âš ï¸ è­¦å‘Šæ¶ˆæ¯ï¼šé»„è‰²
  - ğŸ“Š ç»“æœæ¶ˆæ¯ï¼šæ©™è‰²
  - ğŸ’­ æ€è€ƒæ¶ˆæ¯ï¼šç´«è‰²

## ç•Œé¢è¯´æ˜

### é¡¶éƒ¨æ§åˆ¶æ 
- **Task ID**: ä»»åŠ¡å·¥ä½œç›®å½•è·¯å¾„
- **Agent**: å½“å‰é€‰æ‹©çš„ Agent
- **System**: Agent ç³»ç»Ÿï¼ˆTest_agent/infiHelperï¼‰
- **åˆ·æ–° Agents**: é‡æ–°åŠ è½½ Agent åˆ—è¡¨

### å¯¹è¯çª—å£
- æ˜¾ç¤ºæ‰€æœ‰æ¶ˆæ¯ï¼ˆç”¨æˆ·è¾“å…¥å’Œ Agent è¾“å‡ºï¼‰
- è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
- æ”¯æŒé•¿æ–‡æœ¬å’Œå¤šè¡Œæ˜¾ç¤º

### è¾“å…¥åŒºåŸŸ
- æ–‡æœ¬è¾“å…¥æ¡†ï¼ˆæ”¯æŒå¤šè¡Œï¼‰
- å‘é€æŒ‰é’®
- çŠ¶æ€æ ï¼ˆæ˜¾ç¤ºè¿è¡ŒçŠ¶æ€å’Œ Workspace è·¯å¾„ï¼‰

## æŠ€æœ¯æ¶æ„

- **åç«¯**: Flask + Server-Sent Events (SSE)
- **å‰ç«¯**: åŸç”Ÿ HTML + CSS + JavaScript
- **è¾“å‡ºæ•è·**: è‡ªå®šä¹‰ OutputCapture ç±»æ•è· stdout/stderr
- **æµå¼ä¼ è¾“**: ä½¿ç”¨ SSE å®ç°å®æ—¶è¾“å‡º

## æ–‡ä»¶ç»“æ„

```
web_ui/
â”œâ”€â”€ server/                    # æœåŠ¡å™¨ç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ server.py              # Flask åç«¯æœåŠ¡å™¨
â”‚   â”œâ”€â”€ output_capture.py      # è¾“å‡ºæ•è·å·¥å…·
â”‚   â”œâ”€â”€ start.sh               # å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ stop.sh                # åœæ­¢è„šæœ¬
â”‚   â””â”€â”€ server                 # ç»Ÿä¸€ç®¡ç†è„šæœ¬
â”œâ”€â”€ index.html                 # å‰ç«¯é¡µé¢
â”œâ”€â”€ static/                    # é™æ€èµ„æº
â”‚   â”œâ”€â”€ style.css             # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ app.js                # JavaScript é€»è¾‘
â”œâ”€â”€ requirements.txt           # Python ä¾èµ–
â””â”€â”€ README.md                 # ä½¿ç”¨è¯´æ˜
```

## æ•…éšœæ’é™¤

### 1. æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨
- æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥ç«¯å£ 5000 æ˜¯å¦è¢«å ç”¨
- æŸ¥çœ‹æœåŠ¡å™¨ç»ˆç«¯çš„é”™è¯¯ä¿¡æ¯

### 2. Agent æ‰§è¡Œå¤±è´¥
- æ£€æŸ¥ Task ID è·¯å¾„æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ Agent åç§°æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

### 3. è¾“å‡ºä¸æ˜¾ç¤º
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ JavaScript é”™è¯¯
- æ£€æŸ¥ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸ
- æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

## å¼€å‘è¯´æ˜

### ä¿®æ”¹ç«¯å£

åœ¨ `server.py` ä¸­ä¿®æ”¹ï¼š
```python
port = int(os.environ.get('PORT', 5000))
```

æˆ–é€šè¿‡ç¯å¢ƒå˜é‡ï¼š
```bash
PORT=8080 python server.py
```

### æ·»åŠ æ–°çš„ Agent å¤´åƒ

åœ¨ `app.js` ä¸­çš„ `agentAvatars` å¯¹è±¡ä¸­æ·»åŠ ï¼š
```javascript
const agentAvatars = {
    'your_agent': 'ğŸ¯',
    // ...
};
```

### è‡ªå®šä¹‰æ ·å¼

ä¿®æ”¹ `static/style.css` æ–‡ä»¶æ¥è‡ªå®šä¹‰ç•Œé¢æ ·å¼ã€‚

## è®¸å¯è¯

ä¸ä¸»é¡¹ç›®ç›¸åŒã€‚

